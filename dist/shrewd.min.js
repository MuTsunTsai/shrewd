/**
 * shrewd v0.0.11
 * (c) 2019-2021 Mu-Tsun Tsai
 * Released under the MIT License.
 */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Shrewd=e()}(this,(function(){"use strict";var t;!function(t){t.array=function(t,e){if(!t!=!e)return!1;if(t==e)return!0;if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0},t.unorderedArray=function(t,e){if(!t!=!e)return!1;if(t==e)return!0;if(t.length!=e.length)return!1;for(let s of t)if(!e.includes(s))return!1;return!0}}(t||(t={}));class e{constructor(){this.t=new Set,this.s=e.i++}static h(t){return!(!R.o&&t.l)||(R.u&&!R.$(t)?(console.warn("Inside a renderer function, only the objects owned by the ObservableProperty can be written."),r.p.debug,!1):!(!R.u&&R.g)||(console.warn("Writing into Observables is not allowed inside a ComputedProperty or a ReactiveMethod. For self-correcting behavior, use the renderer option of the ObservableProperty."),r.p.debug,!1))}static m(t){r.p.hook.write(t.s);for(let e of t.t)r.p.debug?e.v(t):e.v()}_(t){this.t.add(t)}S(t){this.t.delete(t)}get l(){return this.t.size>0}get j(){return this.t.values()}}e.i=0;class s{read(t){return!1}write(t){}gc(){return[]}sub(t){return!1}}class i{constructor(t){if(this.O=new Set,this.k=t||"undefined"!=typeof window&&window.Vue,!this.k)throw new Error("Global Vue not found; you need to pass a Vue constructor to VueHook.");this.R=new this.k({data:{shrewd:{}}})}read(t){let e=this.R.shrewd[t];return e&&e.__ob__.dep.subs.length>0}write(t){r.p.autoCommit?this.k.set(this.R.shrewd,t,{}):this.O.add(t)}precommit(){for(let t of this.O)this.k.set(this.R.shrewd,t,{});this.O.clear()}gc(){let t=[];for(let e in this.R.shrewd)0==this.R.shrewd[e].__ob__.dep.subs.length&&(this.k.delete(this.R.shrewd,e),t.push(Number(e)));return t}sub(t){return t in this.R.shrewd&&this.R.shrewd[t].__ob__.dep.subs.length>0}}class r{static C(){r.p.hook.precommit&&r.p.hook.precommit(),R.P({g:!0});try{for(let t of r.A)a.G(t,!0)}finally{a.M(),r.A.clear(),R.T();for(let t of r.D)t.V();r.D.clear(),r.p.debug&&a.W();for(let t of r.p.hook.gc()){let e=a.q.get(t);e&&a.H(e)}}r.p.hook.postcommit&&r.p.hook.postcommit()}static F(t){r.I.add(t)}static K(){if(!r.N){r.N=!0;for(let t of r.I)r.I.delete(t),t.B();r.N=!1}}static B(t){if(t[h]){if(!r.N){r.N=!0;for(let e of t[h].J())r.I.delete(e),e.B();r.N=!1}}else n.L.add(t)}static U(){r.C(),r.X=!1}static Y(t){r.A.delete(t)}static Z(t){t.tt||r.A.add(t),r.p.autoCommit&&!r.X&&(Promise.resolve().then(r.U),r.X=!0)}static V(t,e=!1){if(c.et(t,h)){let s=t[h];e?r.D.add(s):s.V()}}}r.p={hook:new s,autoCommit:!0,debug:!1},r.A=new Set,r.D=new Set,r.I=new Set,r.X=!1,r.N=!1;class n{static get(t){if(c.et(t,C))return t[C];{let e=[];return c.st(t,C,e),e}}static it(t,e,s,i){if(void 0===e)return"function"==typeof t?n.rt(t):(e,s,i)=>n.it(e,s,i,t);if("string"==typeof e){let r=s||Object.getOwnPropertyDescriptor(t,e);if(!r)return n.nt(O,t,e,void 0,i);if(r.get&&!r.set)return n.nt(x,t,e,r,i);if("function"==typeof r.value)return n.nt(k,t,e,r,i)}console.warn(`Setup error at ${t.constructor.name}[${e.toString()}]. Decorated member must be one of the following: a field, a readonly get accessor, or a method.`),r.p.debug}static rt(t){var e=new Proxy(t,n.ht);return n.ot.add(e),e}static nt(t,e,s,i,r){var h=new t(e,s,i,r);return n.get(e).push(h.ct),h.lt()}}n.ot=new WeakSet,n.ht={construct(t,e,s){n.ot.has(s)||console.warn(`Class [${s.name}] is derived form @shrewd class [${t.name}], but it is not decorated with @shrewd.`),R.P({o:!0,g:!1,ut:null}),a.at.push("construct "+t.name);try{let i=Reflect.construct(t,e,s);return i.constructor==t&&new o(i),n.L.has(i)&&(n.L.delete(i),r.B(i)),i}finally{a.at.pop(),R.T()}}},n.L=new Set;const h=Symbol("ShrewdObject");class o{constructor(t){this.ft=!1,this.dt=new Map,this.$t=c.st(t,h,this);let e=Object.getPrototypeOf(this.$t);for(;e;){if(c.et(e,C)){let t=e[C];for(let e of t){let t=new e.pt(this.$t,e);this.dt.has(t.gt)?t.V():this.dt.set(t.gt,t)}}e=Object.getPrototypeOf(e)}for(let t of this.dt.values())r.F(t)}V(){if(!this.ft){for(let t of this.dt.values())t.V();this.ft=!0}}J(t){return t?this.dt.get(t):this.dt.values()}get bt(){let t=[];for(let e of this.dt.values())e instanceof m&&t.push(e);return t}}class c{static et(t,e){return Object.prototype.hasOwnProperty.call(t,e)}static st(t,e,s){return Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!1,value:s}),t}}class l{get(t,e,s){let i=t[f],r=Reflect.get(t,e);return"function"==typeof r&&(r=this.wt.bind({yt:e,ut:t,vt:r.bind(t),_t:i,St:s})),"size"==e&&a.jt(t[f]),r}wt(...t){switch(this.yt){case"clear":return void(a.h(this._t)&&this.ut.size>0&&(this.ut.clear(),e.m(this._t)));case"delete":return void(a.h(this._t)&&this.ut.has(t[0])&&(this.ut.delete(t[0]),e.m(this._t)));case Symbol.iterator:case"entries":case"forEach":case"has":case"keys":case"values":a.jt(this._t);default:return this.vt(...t)}}}var u;!function(t){t[t.xt=0]="$outdated",t[t.Ot=1]="$updated",t[t.kt=2]="$pending"}(u||(u={}));class a extends e{constructor(t){super(),this.Rt=new Set,this.Ct=!1,this.Pt=u.xt,this.ft=!1,this.trigger=new Set,a.q.set(this.s,this),this.At=t}static M(){for(let t of a.Gt)t.Pt==u.kt&&t.Mt&&(t.zt(),a.Gt.delete(t))}static W(){for(let t of a.Tt)t.trigger.clear();a.Tt.clear()}static Dt(t){let e=[t.At];for(;t.trigger.size;){let s=t.trigger.values().next().value;if(!(s instanceof a))break;let i=s.At;s instanceof $&&(i+="("+$.Vt(s)+")"),e.push(i),t=s}console.log(e)}static jt(t){if(t instanceof a&&t.ft)return;r.p.hook.read(t.s)&&t instanceof a&&t.Wt();let e=R.ut;e&&e!=t&&!e.ft&&e.Rt.add(t)}static H(t){if(t instanceof a&&!t.ft&&t.qt&&!(t.qt=t.Et())){r.Y(t);for(let e of t.Rt)a.H(e)}}static G(t,e=!1){if(!e||(t.Ht(),!t.ft)){R.P({o:!1,ut:t}),t.Ct=!0,r.Y(t);try{let e=new Set(t.Rt);t.Ft(),t.It();try{let e=t.Kt();t.Nt(e)}finally{t.Bt()}if(t.zt(),!t.ft)for(let s of t.Rt)e.delete(s),s._(t),t.Mt&&s instanceof a&&s.Wt();for(let t of e)a.H(t)}finally{t.Ct=!1,R.T()}}}get tt(){return this.Ct}v(t){this.Jt(),this.Lt(t),this.Mt&&r.Z(this)}V(){this.ft||(r.Y(this),a.q.delete(this.s),a.Gt.delete(this),this.ft=!0,this.Qt())}Qt(){this.Ft();for(let t of this.j)t.Rt.delete(this),this.S(t);this.zt(),this.Ct=!1}Jt(){if(this.Pt==u.Ot){this.Pt=u.kt,a.Gt.add(this);for(let t of this.j)t.Jt()}}Ut(){if(this.Ct&&this.Xt(),this.Pt!=u.Ot){a.at.push(this);try{this.Ht(),this.Pt==u.xt?a.G(this):(a.Gt.delete(this),this.zt())}finally{a.at.pop()}}}Ht(){for(let t of this.Rt)if(t instanceof a){if(t.Ct){a.G(this);break}t.Pt!=u.Ot&&t.Ut()}}Xt(){r.p.debug;let t=a.at.indexOf(this),e=[this,...a.at.slice(t+1)];e.forEach(t=>t instanceof a&&t.V()),e.push(this);let s=e.map(t=>"string"==typeof t?t:t.At).join(" => ");console.warn("Cyclic dependency detected: "+s+"\nAll these reactions will be terminated.")}zt(){this.Pt=u.Ot}Lt(t){t&&(a.Tt.add(this),this.trigger.add(t)),this.Pt=u.xt}get Yt(){return this.Pt}get Mt(){return this.qt=null!=this.qt?this.qt:this.Et()}Et(){if(r.p.hook.sub(this.s))return!0;for(let t of this.j)if(t.Mt)return!0;return!1}Wt(){if(!this.Mt){this.qt=!0;for(let t of this.Rt)t instanceof a&&t.Wt()}}It(){}Nt(t){}Bt(){}Ft(){for(let t of this.Rt)t.S(this);this.Rt.clear()}get Zt(){return this.Rt.size>0}get te(){return this.ft}}a.Gt=new Set,a.Tt=new Set,a.q=new Map,a.at=[];const f=Symbol("Observable Helper");class d extends e{constructor(t,e){super(),this.ee=c.st(t,f,this),this.se=new Proxy(t,e),d.ie.set(t,this.se)}static re(t){if(null==t||"object"!=typeof t)return t;if(d.ie.has(t))return d.ie.get(t);if(!d.ne(t))switch(Object.getPrototypeOf(t)){case Array.prototype:t=new _(t).he;break;case Set.prototype:t=new b(t).he;break;case Map.prototype:t=new w(t).he;break;case Object.prototype:t=new g(t).he}return t}static oe(t){d.ne(t)&&(t=t[f].ee),d.ie.has(t)&&d.ie.delete(t)}static ne(t){return null!=t&&"object"==typeof t&&c.et(t,f)}get he(){return this.se}}d.ie=new WeakMap;class $ extends a{constructor(t,e){super(e.ce+"."+e.le.toString()),this.ue=e,this.ae=Object.assign(this.fe,e.p),this.$t=t}static Vt(t){return t.$t.constructor.name}get gt(){return this.ue.ce+"."+this.ue.le.toString()}B(){this.Ut()}get fe(){return{}}Et(){return!!this.ae.active||super.Et()}de(){return this.te?this.$e():(a.jt(this),this.pe())}}class p{has(t,e){return a.jt(t[f]),Reflect.has(t,e)}get(t,e,s){return a.jt(t[f]),Reflect.get(t,e,s)}set(t,s,i,r){let n=t[f];if(e.h(n)){return i!==Reflect.get(t,s,r)&&(Reflect.set(t,s,d.re(i),r),e.m(n)),!0}return!0}deleteProperty(t,s){let i=t[f];if(e.h(i)){let r=Reflect.deleteProperty(t,s);return r&&e.m(i),r}return!0}}class g extends d{constructor(t){for(let e in t)t[e]=d.re(t[e]);super(t,g.ge)}get be(){let t=[];for(let e in this.ee){let s=this.ee[e];"object"==typeof s&&t.push(s)}return t}}g.ge=new p;class b extends d{constructor(t){for(let e of t)t.delete(e),t.add(d.re(e));super(t,b.ge)}get be(){let t=[];for(let e of this.ee)"object"==typeof e&&t.push(e);return t}}b.ge=new class extends l{wt(...t){return"add"==this.yt?(a.h(this._t)&&!this.ut.has(t[0])&&(this.ut.add(d.re(t[0])),e.m(this._t)),this.St):super.wt.apply(this,t)}};class w extends d{constructor(t){for(let[e,s]of t)t.set(e,d.re(s));super(t,w.ge)}get be(){let t=[];for(let[e,s]of this.ee)"object"==typeof e&&t.push(e),"object"==typeof s&&t.push(s);return t}}w.ge=new class extends l{wt(...t){return"set"==this.yt?(a.h(this._t)&&!this.ut.has(t[0])&&(this.ut.set(t[0],d.re(t[1])),e.m(this._t)),this.St):super.wt.apply(this,t)}};class y extends ${constructor(t,e){var s,i;super(t,e),this.we=e.vt,this.ae.active&&this.v(),null!==(s=(i=this.ae).comparer)&&void 0!==s||(i.comparer=(t,e)=>t===e)}get Kt(){return this.we.bind(this.$t)}Nt(t){this.ae.comparer.apply(this.$t,[this.ye,t,this])||(this.ye=t,e.m(this)),this.Zt||this.V()}pe(){return this.Ut(),this.Zt||this.V(),this.ye}$e(){return this.ye}Qt(){d.oe(this.ye),super.Qt()}}class m extends ${constructor(t,e){super(t,e),this.me=!1,this.ve=this._e=t[e.le],Object.defineProperty(t,e.le,m.Se(e.le)),this.ae.renderer||this.zt()}static Se(t){return m.je[t]=m.je[t]||{get(){return this[h].J(t).de()},set(e){this[h].J(t).xe(e)}}}static Oe(t){if(null!=t&&"object"==typeof t)if(d.ne(t)){if(!R.$(t[f])){R.Oe(t[f]);for(let e of t[f].be)m.Oe(e)}}else if(c.et(t,h))for(let e of t[h].bt)R.$(e)||(R.Oe(e),m.Oe(e.ve))}get gt(){return this.ue.le.toString()}B(){this.me||(this.ke(),this.ae.renderer?this.Ut():this.ve=this._e,this.me=!0)}Lt(t){this.ae.renderer&&super.Lt(t)}ke(){var t,e;null===(e=null===(t=this.ae.validator)||void 0===t?void 0:t.apply(this.$t,[this._e]))||void 0===e||e||(this._e=void 0),this._e=d.re(this._e)}pe(){return this.me?(this.ae.renderer&&this.Ut(),this.ve):(this.ke(),this._e)}$e(){return this.ve}xe(t){var s,i;if(this.te)this.ve=t;else if(e.h(this)&&t!==this._e){if(null!==(i=null===(s=this.ae.validator)||void 0===s?void 0:s.apply(this.$t,[t]))&&void 0!==i&&!i)return r.p.hook.write(this.s);if(this._e=d.re(t),this.ae.renderer){this.It();try{this.Nt(this.Kt())}finally{this.Bt()}}else this.m(this._e)}}It(){R.P({u:!0,Re:new Set}),m.Oe(this._e)}get Kt(){return this.ae.renderer.bind(this.$t,this._e)}Nt(t){t!==this.ve&&this.m(d.re(t))}Bt(){R.T()}m(t){this.ve=t,e.m(this)}Qt(){d.oe(this._e),d.oe(this.ve),delete this._e,delete this.ae,super.Qt()}}m.je={};class v extends ${constructor(t,e){super(t,e),this.wt=e.vt}get fe(){return{active:!0}}get Kt(){return this.wt.bind(this.$t)}pe(){return()=>(this.Ut(),this.Ce)}$e(){return()=>this.Ce}Nt(t){this.Ce=t,e.m(this)}Qt(){d.oe(this.Ce),super.Qt()}}class _ extends d{constructor(t){for(let e in t)t[e]=d.re(t[e]);super(t,_.ge)}get be(){let t=[];for(let e of this.ee)"object"==typeof e&&t.push(e);return this.ee}}var S;_.ge=new class extends p{get(t,e,s){return("length"==e||"symbol"==typeof e||"number"==typeof e||"string"==typeof e&&e.match(/^\d+$/))&&a.jt(t[f]),Reflect.get(t,e,s)}},function(e){e.shrewd=n.it,e.symbol=h,e.commit=r.C,e.terminate=r.V,e.initialize=r.B,e.hook={default:s,vue:i},e.option=r.p,e.comparer=t,e.debug={trigger(t,e){if(c.et(t,h)){let s=t[h].J(e);s||console.log("Member not found"),a.Dt(s)}else t instanceof a&&a.Dt(t)}}}(S||(S={})),"undefined"!=typeof window&&window.Vue&&(r.p.hook=new i);class j{constructor(t,e,s,i){this.Pe=t,this.Ae=e,this.ue=s,this.Ge=i}get At(){return this.Pe.constructor.name+"."+this.Ae.toString()}get ct(){return{le:this.Ae.toString(),ce:this.Pe.constructor.name,pt:this.Me,vt:this.wt,p:this.Ge}}get wt(){}lt(){}}class x extends j{get Me(){return y}get wt(){return this.ue.get}lt(){let t=this.At,e=this.wt;return this.ue.get=function(){if(c.et(this,h)){return this[h].J(t).de()}return e.apply(this)},this.ue}}class O extends j{get Me(){return m}}class k extends j{get Me(){return v}get wt(){return this.ue.value}lt(){let t=this.At,e=this.wt;return delete this.ue.value,delete this.ue.writable,this.ue.get=function(){if(c.et(this,h)){return this[h].J(t).de()}return e.bind(this)},this.ue}}class R{static P(t){R.ze.push(R.Pt),R.Pt=Object.assign({},R.Pt,t)}static T(){R.Pt=R.ze.pop(),0==R.ze.length&&r.K()}static get g(){return R.Pt.g}static get o(){return R.Pt.o}static get u(){return R.Pt.u}static get ut(){return R.Pt.ut}static $(t){return R.Pt.Re.has(t)}static Oe(t){R.Pt.Re.add(t)}}R.Pt={g:!1,o:!1,u:!1,ut:null,Re:new Set},R.ze=[];const C=Symbol("Shrewd Decorators");return S}));
//# sourceMappingURL=shrewd.min.js.map
